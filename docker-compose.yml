version: '3.9'

services:
  backend: &backend
    build: ./backend
    restart: always
    ports:
      - "84:84"
    networks:
      - tel-network

  frontend: &frontend
    build: ./frontend
    restart: always
    ports:
      - "3000:3000"
    networks:
      - tel-network
    depends_on:
      - backend

  # ubuntu: &ubuntu 
  #   image: ubuntu:24.04
  #   restart: always
  #   networks:
  #     - tel-network
  #   command: tail -f /dev/null

  admin: &admin
    build: ./admin
    restart: always
    ports:
      - "83:83"
    volumes:
      - ./admin/static:/app/static
      - ./admin/media:/app/media
      - ./admin/logs:/app/logs
      - ./backend/database/db.sqlite3:/app/db.sqlite3
  
networks:
    tel-network:
        driver: bridge